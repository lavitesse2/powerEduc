// define("local_powerswhool/confirmsupp",['jquery', 'core/modal_factory', 'core/str', 'core/modal_events', 'core/ajax', 'core/notification'],function($, ModalFactory, String, ModalEvents, Ajax, Notification) {var trigger = $('.local_annee_delete_button');ModalFactory.create({type: ModalFactory.types.SAVE_CANCEL,title: 'Supprimer cette Année Scolaire',body: 'Êtes vous sûr de vouloir supprimer cette année?',preShowCallback: function(triggerElement, modal) {triggerElement = $(triggerElement);let classString = triggerElement[0].classList[0];let anneeid = classString.substr(classString.lastIndexOf('id') + 'id'.length);modal.params = {'id': anneeid};modal.setSaveButtonText('supprimer');},large: true,}, trigger).done(function(modal) {modal.getRoot().on(ModalEvents.save, function(e) {e.preventDefault();let footer = Y.one('.modal-footer');footer.setContent('Deleting...');let spinner = M.util.add_spinner(Y, footer);spinner.show();let request = {methodname: 'local_annee_delete_annee',args: modal.params,};Ajax.call([request])[0].done(function(data) {if (data === true) {window.location.reload();} else {Notification.addNotification({message: 'Suppression a echoué',type: 'error',});}}).fail(Notification.exception);});});});
// define ("local_powerschool/confirm",["jquery","core/modal_factory","core/str","core/modal_events","core/ajax","core/notification"],function(a,b,c,d,f,g){var h=a(".local_annee_delete_button");b.create({type:b.types.SAVE_CANCEL,title:c.get_string("delete_message","local_message"),body:c.get_string("delete_message_confirm","local_message"),preShowCallback:function preShowCallback(b,d){b=a(b);var e=b[0].classList[0],f=e.substr(e.lastIndexOf("id")+15);d.params={messageid:f};d.setSaveButtonText(c.get_string("delete_message","local_message"))},large:!0},h).done(function(a){a.getRoot().on(d.save,function(b){b.preventDefault();var d=Y.one(".modal-footer");d.setContent("Deleting...");var e=M.util.add_spinner(Y,d);e.show();var h={methodname:"local_annee_delete_annee",args:a.params};f.call([h])[0].done(function(a){if(!0===a){window.location.reload()}else{g.addNotification({message:c.get_string("delete_message_failed","local_message"),type:"error"})}}).fail(g.exception)})})});
//# sourceMappingURL=confirm.min.js.map

//# sourceMappingURL=confirmsupp.min.js.map
define("local_powerschool, require jquery core/modal_factory core/str core/modal_events core/ajax core/notification".split(" "),function(d,e,f,h,k,g){f=d(".local_annee_delete_button");e.create({type:e.types.SAVE_CANCEL,title:"Supprimer cette Ann\u00e9e Scolaire",body:"\u00cates vous s\u00fbr de vouloir supprimer cette ann\u00e9e?",preShowCallback:function(c,a){c=d(c);var b=c[0].classList[0];b=b.substr(b.lastIndexOf("id")+2);console.log(b);a.params={id:b};a.setSaveButtonText("supprimer")},large:!0},f).done(function(c){c.getRoot().on(h.save,function(a){a.preventDefault();a=Y.one(".modal-footer");a.setContent("Deleting...");M.util.add_spinner(Y,a).show();k.call([{methodname:"local_annee_delete_annee",args:c.params}])[0].done(function(b){!0===b?window.location.reload():g.addNotification({message:"Suppression a echou\u00e9",type:"error"})}).fail(g.exception)})})});
